<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    
    <head>
        <title>Test Widget</title>
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />
        <link rel="stylesheet" type="text/css" href="/common/ui/melange.css" media="screen">
    </head>
    
    <body>
        <div style="width: 160px; height: 160px;">
            <img style="position: absolute; z-index: -10;" src="background.png"/>
            <canvas id="canvas" width="160" height="160" style="position: absolute; z-index: 10;"></canvas>
            <script>
            init();
    
            function init(){
                canvas = document.getElementById('canvas')
                ctx = canvas.getContext('2d');
                ctx.scale(canvas.width/100.0, canvas.height/100.0);
                clock();
                setInterval(clock, 1000);
            }
    
            function clock(){
                var now = new Date();
                ctx.save();
                ctx.clearRect(0, 0, 100, 100);
                ctx.translate(50, 50);
                ctx.rotate(-Math.PI/2);
                ctx.strokeStyle = 'rgba(256, 256, 256, .25)';
                ctx.fillStyle = "white";
                ctx.lineWidth = 2;
                ctx.lineCap = "round";
    
                var sec = now.getSeconds();
                var min = now.getMinutes();
                var hr  = now.getHours();
                hr = hr>=12 ? hr-12 : hr;
                
                ctx.fillStyle = "black";
                
                // write Hours
                ctx.save();
                ctx.strokeStyle = 'rgba(50, 50, 50, 1)';
                ctx.rotate( hr*(Math.PI/6) + (Math.PI/360)*min + (Math.PI/21600)*sec )
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(-6,0);
                ctx.lineTo(32,0);
                ctx.stroke();
                ctx.restore();
                
                // write Minutes
                ctx.save();
                ctx.strokeStyle = 'rgba(50, 50, 50, 1)';
                ctx.rotate( (Math.PI/30)*min + (Math.PI/1800)*sec )
                ctx.lineWidth = 2.5;
                ctx.beginPath();
                ctx.moveTo(-7,0);
                ctx.lineTo(35,0);
                ctx.stroke();
                ctx.restore();
                
                // Write seconds
                ctx.save();
                ctx.strokeStyle = 'rgba(220, 0, 0, 1)';
                ctx.fillStyle = 'rgba(220, 0, 0, 1)';
                ctx.rotate(sec * Math.PI/30);
                ctx.lineWidth = 1.5;
                ctx.beginPath();
                ctx.moveTo(-8,0);
                ctx.lineTo(40,0);
                ctx.stroke();
                ctx.beginPath();
                ctx.arc(0,0,3,0,Math.PI*2,true);
                ctx.fill();
                ctx.restore();
                
                ctx.restore();
            }
            
            </script>
        </div>
    </body>
</html>


