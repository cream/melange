<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

    <head>
        <title>Test Widget</title>
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />
        <link rel="stylesheet" type="text/css" href="/common/styles/melange.css" media="screen">
        <style type="text/css">
        @font-face {
            font-family: LCDDotMatrix5x8 ;
            src: url(LCDDotMatrix5x8.ttf ) format("truetype");
            }
        </style>
    </head>

    <body>
        <div class="widget" style="min-width: 160px;">
            <div style="width: 70px; float: left; text-align: center;">
                <img src="images/clear.png" /><br />
                <span id="temperature" style="font-size: 1.8em; font-weight: bold; line-height: 1em;">NaN</span>
            </div>
            <div style="margin-left: 80px;">
                <span style="font-size: .65em; line-height: 1em;">Wind:</span><br />
                <span id="wind" style="font-size: .8em; font-weight: bold; line-height: 1em;">NaN</span><br />

                <span style="font-size: .65em; line-height: 1em;">Humidity:</span><br />
                <span id="humidity" style="font-size: .8em; font-weight: bold; line-height: 1em;">NaN</span><br />

                <span style="font-size: .65em; line-height: 1em;">Pressure:</span><br />
                <span id="pressure" style="font-size: .8em; font-weight: bold; line-height: 1em;">NaN</span>
            </div>
            <div style="clear: both;"></div>

        <script type="text/javascript" src="/common/scripts/framework.js"></script>
        <script type="text/javascript" src="/common/scripts/creamlib.js"></script>
        <script type="text/javascript">
            cream.call_periodically({
                    interval: 60000,
                    bus: 'org.cream.collector',
                    interface: 'org.cream.collector',
                    method: 'get_weather',
                    object: '/org/cream/collector/weather',
                    data: ['Heidelberg, Germany'],
                    callback: function(json) {
                        $('temperature').set('text', json['temperature']+'Â°C');
                        $('wind').set('text', json['wind_speed']+'km/h');
                        $('humidity').set('text',json['humidity']+'%');
                        $('pressure').set('text', json['pressure']+'hPa');
                    }
                });
        </script>
        </div>
    </body>

</html>
